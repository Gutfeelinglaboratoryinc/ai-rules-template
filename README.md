# Cursor Rules Template - 作業手順ガイド

このプロジェクトは、**Cursor エディタのAI機能を活用して高品質なドキュメントを効率的に作成する**ためのテンプレート集です。

## 🎯 このガイドの対象者

- システムエンジニア
- Cursor エディタを使用可能な方
- 日本語でのドキュメント作成が必要な方

## 📁 プロジェクト構成

```
cursor-rules-template/
├── .cursor/rules/               # Cursor AI 用のルール定義
│   ├── base.mdc                # 共通ルール（全プロジェクト適用）
│   ├── task-request.mdc        # タスク依頼書作成ルール
│   ├── feature-spec.mdc        # 機能設計書作成ルール
│   ├── frontend-rules.mdc      # フロントエンド開発ルール
│   ├── backend-common.mdc      # バックエンド共通ルール
│   ├── backend-python.mdc      # Python 特有ルール
│   └── backend-typescript.mdc  # TypeScript 特有ルール
├── docs/                       # ドキュメントテンプレート
│   ├── task-request/           # タスク依頼書テンプレート
│   ├── feature-spec/           # 機能設計書テンプレート
│   └── README.md              # テンプレート使用ガイド
├── setup-rules.sh              # 自動セットアップスクリプト
└── README.md                   # このファイル
```

## 🚀 セットアップ手順

### 🔥 方法1: 自動セットアップスクリプト（推奨）

**一番簡単で確実な方法です！**

#### ステップ1: スクリプト実行
```bash
# ai-rules-templateディレクトリから実行
./setup-rules.sh <対象プロジェクトのパス>

# 例：隣接するプロジェクトにセットアップ
./setup-rules.sh ../my-backend-project

# 例：絶対パスでプロジェクトを指定
./setup-rules.sh /Users/username/projects/my-app
```

#### ステップ2: セットアップ内容の確認
スクリプトが以下を自動実行します：

1. **Cursorルールのコピー**: `.cursor/rules/` ディレクトリと全ルールファイル
2. **ドキュメントテンプレートのコピー**: `docs/` 配下にテンプレートファイル（任意）
3. **`.gitignore` の更新**: `.cursor/` ディレクトリを除外設定に追加（任意）

#### ステップ3: Cursor エディタで開く
```bash
# 対象プロジェクトをCursorで開く
cursor <対象プロジェクトのパス>
```

**🎉 これだけで完了です！** すぐにAI機能を使って設計書が作成できます。

#### スクリプトオプション
```bash
# ヘルプ表示
./setup-rules.sh --help

# 既存ファイルを強制上書き
./setup-rules.sh --force ../my-project
```

### 📋 方法2: 手動セットアップ

手動でセットアップしたい場合：

#### ステップ1: プロジェクトの取得
```bash
git clone <repository-url>
cd cursor-rules-template
```

#### ステップ2: ルールファイルを対象プロジェクトにコピー
```bash
# 対象プロジェクトに.cursorディレクトリを作成
mkdir -p /path/to/your/project/.cursor/rules

# ルールファイルをコピー
cp -r .cursor/rules/* /path/to/your/project/.cursor/rules/
```

#### ステップ3: Cursor エディタで開く
1. Cursor エディタを起動
2. `File > Open Folder` でプロジェクトディレクトリを開く
3. `.cursor/rules/` 内のルールファイルが自動的に読み込まれます

## 📝 AIを活用したドキュメント作成手順

### 🎯 タスク依頼書の作成

#### ステップ1: 新しいファイルを作成
1. **Cursor エディタ**で `docs/task-request/` ディレクトリに移動
2. `Ctrl + N` (または `Cmd + N`) で新しいファイルを作成
3. ファイル名を入力例：`user-authentication-api.md`
4. `Ctrl + S` で保存

#### ステップ2: AI Chat でタスク依頼書を生成
1. **Cursor のチャット機能**を開く (`Ctrl + L` または `Cmd + L`)
2. 以下のような**自然言語プロンプト**を入力：

**プロンプト例1（基本的なAPI実装）**
```
ユーザー認証APIのタスク依頼書を作成してください。

背景：
現在ログイン機能がなく、ユーザーがシステムを使えない状態です。
セキュアなログイン機能を実装して、ユーザーが安全にシステムにアクセスできるようにしたいです。

要件：
- メールアドレスとパスワードでログイン
- JWT トークンを使った認証
- パスワードの暗号化
- ログイン失敗時の制限機能
- 2週間でリリース予定

担当者は田中さんで、依頼者は私です。
```

**プロンプト例2（既存システム改修）**
```
商品検索機能の改修タスク依頼書を作成してください。

現状の問題：
- 検索が遅い（5秒以上かかることがある）
- 部分一致検索ができない
- 検索結果の並び順がバラバラ

改善したい内容：
- 1秒以内で検索結果を表示
- 商品名、カテゴリ、説明文での部分検索
- 人気順、価格順、新着順での並び替え
- 検索履歴の保存

期限は来月末で、工数は3人日程度を想定しています。
担当は佐藤さん（フロントエンド・バックエンド両方できる）です。
```

#### ステップ3: 生成されたドキュメントを確認・調整
1. AI が生成したタスク依頼書をレビュー
2. 不足している情報があれば追加のプロンプトで補完：
```
工数見積もりの根拠を詳しく追加してください
テスト仕様でエラーケースを具体的にしてください
```

#### ステップ4: ファイルを保存
- `Ctrl + S` で保存
- ファイル名は機能名が分かりやすい形で（例：`product-search-improvement.md`）

### 🏗️ 機能設計書の作成

#### ステップ1: 新しいファイルを作成
1. `docs/feature-spec/` ディレクトリに移動
2. 新しいファイルを作成（例：`product-search-api.md`）

#### ステップ2: AI Chat で機能設計書を生成
**プロンプト例1（新規API設計）**
```
商品検索APIの機能設計書を作成してください。

技術要件：
- Python + FastAPI でバックエンド実装
- PostgreSQL でデータ保存
- Redis でキャッシュ機能
- Elasticsearch で高速検索
- AWS でホスティング

API仕様：
- GET /api/v1/products/search で検索
- クエリパラメータで検索条件指定
- ページング機能つき
- レスポンスはJSON形式

パフォーマンス要件：
- 1秒以内のレスポンス
- 同時100ユーザーまで対応
- 99.9%の稼働率

セキュリティ：
- JWT認証必須
- 不正なクエリの防止
- レート制限の実装
```

**プロンプト例2（既存システム連携）**
```
ユーザー管理システムと注文管理システムを連携する機能の設計書を作成してください。

連携内容：
- ユーザーが注文した時に、ユーザー情報を自動で注文に紐付け
- 注文履歴からユーザーの購買パターンを分析
- VIPユーザーに特別な処理を適用

技術制約：
- 既存のユーザーDBは変更不可
- 注文システムは別チームが管理
- リアルタイム連携は不要（数分の遅延は許容）

使用技術：
- Python（メイン言語）
- REST API で連携
- AWS Lambda でイベント処理
- RDS でデータ保存

負荷想定：
- 1日1000件の注文
- ピーク時は1時間100件
```

#### ステップ3: 技術的詳細を追加要求
生成された設計書を確認後、必要に応じて詳細を追加：
```
データベースのテーブル設計を詳しくしてください
API のエラーレスポンス仕様を追加してください
監視・アラート設定を具体的にしてください
```

#### ステップ4: 設計書の最終確認
- システム構成図が適切か確認
- API仕様が実装可能か確認
- パフォーマンス要件が現実的か確認

## 💡 効果的なプロンプトのコツ

### ✅ 良いプロンプトの特徴
- **具体的な背景**を説明する
- **技術制約**を明確にする
- **期限・工数**の目安を伝える
- **関係者の情報**（担当者のスキルレベルなど）を含める

### ❌ 避けるべきプロンプト
- 「APIの設計書を作って」（抽象的すぎ）
- 技術的な詳細なし
- 期限や制約の情報なし
- 一度に全ての詳細を求める

### 🎯 段階的にプロンプトを活用
1. **最初は大枠**を自然言語で説明
2. **不足部分を具体的**に追加依頼
3. **技術的詳細**を段階的に深掘り

## 🔧 実践的な作業例

### シナリオ：ECサイトの商品レビュー機能追加

#### タスク依頼書作成のプロンプト
```
ECサイトに商品レビュー機能を追加するタスク依頼書を作成してください。

背景：
お客様から「他の人のレビューが見たい」「自分もレビューを書きたい」という要望が多数届いています。
現在はレビュー機能がなく、購入の判断材料として不十分な状態です。

実装したい機能：
- 商品にレビューを投稿
- レビューの閲覧（星5段階 + コメント）
- 不適切なレビューの報告機能
- レビューの平均評価表示

制約：
- 購入した人のみレビュー投稿可能
- 1商品につき1人1回まで
- 既存の商品詳細ページに組み込み

期限：来月末（約4週間）
担当者：山田さん（フルスタックエンジニア、React + Node.js 得意）
```

#### 機能設計書作成のプロンプト
```
商品レビュー機能の技術設計書を作成してください。

フロントエンド：
- React + TypeScript
- 既存のデザインシステムを使用
- レスポンシブ対応必須

バックエンド：
- Node.js + Express
- MySQL でデータ保存
- 既存の商品API・ユーザーAPIと連携

セキュリティ要件：
- JWT認証でユーザー識別
- 購入履歴の確認
- XSS対策の実装
- 不適切なコンテンツの検出

パフォーマンス：
- レビュー表示は2秒以内
- レビュー投稿は5秒以内
- 大量レビューでもページ表示が重くならない

運用面：
- レビューの管理画面
- 不適切レビューの削除機能
- レビュー統計の集計
```

## 🔍 トラブルシューティング

### 問題1: AI が生成したドキュメントが期待と違う
**解決方法：**
- より具体的な情報を追加プロンプトで提供
- 「〜を具体的にしてください」「〜を詳しく説明してください」で深掘り
- 段階的に要求レベルを上げる

### 問題2: 技術的な詳細が不足している
**解決方法：**
```
データベース設計を詳しくしてください
APIのリクエスト・レスポンス例を追加してください
エラーハンドリングの仕様を具体的にしてください
```

### 問題3: 現実的でない要件が含まれている
**解決方法：**
- 制約条件を明確に伝える
- 既存システムとの関係を説明
- 技術的な制限を具体的に指定

## 📚 参考情報

### 関連ドキュメント
- [ドキュメントテンプレート詳細](docs/README.md)
- [Cursor Rules 一覧](.cursor/rules/)

### よく使う追加プロンプト例
```
# ドキュメントの品質向上
「完了条件をもっと具体的にしてください」
「テストケースを追加してください」
「エラーケースを詳しくしてください」

# 技術的詳細の追加
「データベース設計を詳しくしてください」
「API仕様を OpenAPI 形式で記述してください」
「セキュリティ対策を具体的にしてください」

# 運用面の強化
「監視項目を追加してください」
「デプロイ手順を詳しくしてください」
「障害対応手順を追加してください」
```

---

このガイドを参考に、効率的で高品質なドキュメント作成を実践してください！  
不明な点があれば、チーム内で相談・共有をお願いします。

## セットアップ方法

### 方法1: Cursor エディタ用（推奨）

自動セットアップスクリプトを使用：

```bash
# ai-rules-template ディレクトリで実行
./setup-rules.sh <対象プロジェクトのパス>

# 例
./setup-rules.sh ../my-project
./setup-rules.sh /path/to/your/project
```

### 方法2: GitHub Copilot（VS Code）用

GitHub Copilot用のInstructionsファイルを設定：

```bash
# ai-rules-template ディレクトリで実行
./setup-copilot.sh <対象プロジェクトのパス>

# 例
./setup-copilot.sh ../my-project
./setup-copilot.sh /path/to/your/project
```

#### GitHub Copilot の設定手順

1. スクリプト実行後、VS Codeで対象プロジェクトを開く
2. 設定で以下を有効にする：
   - `github.copilot.chat.codeGeneration.useInstructionFiles`: true
3. GitHub Copilotでコード生成時に自動的にルールが適用されます

#### オプション

- `--symlink` (推奨): シンボリックリンクでルールを連携
- `--copy`: ファイルをコピー（ルール更新時は手動再実行が必要）
- `--force`: 既存ファイルを強制上書き

#### ルール更新時

シンボリックリンク使用時は、以下で全プロジェクトに更新を反映：

```bash
./update-copilot-instructions.sh
```

### 方法3: 手動セットアップ（Cursor用）

手動でセットアップしたい場合：

#### ステップ1: プロジェクトの取得
```bash
git clone <repository-url>
cd cursor-rules-template
```

#### ステップ2: ルールファイルを対象プロジェクトにコピー
```bash
# 対象プロジェクトに.cursorディレクトリを作成
mkdir -p /path/to/your/project/.cursor/rules

# ルールファイルをコピー
cp -r .cursor/rules/* /path/to/your/project/.cursor/rules/
```

#### ステップ3: Cursor エディタで開く
1. Cursor エディタを起動
2. `File > Open Folder` でプロジェクトディレクトリを開く
3. `.cursor/rules/` 内のルールファイルが自動的に読み込まれます

## 使用例

### Cursor エディタでの使用

# ... existing code ...

### VS Code + GitHub Copilot での使用

1. プロジェクトで `./setup-copilot.sh` を実行
2. VS Codeでプロジェクトを開く
3. GitHub Copilotの設定を有効化
4. チャットやコード補完時に自動的にルールが適用される

### ルール管理

- **共通ルール**: `.cursor/rules/base.mdc`
- **言語固有ルール**: `.cursor/rules/backend-python.mdc` など
- **文書作成ルール**: `.cursor/rules/feature-spec.mdc`, `task-request.mdc`

ルールを更新した場合：
- Cursor用: 自動的に反映
- Copilot用: `./update-copilot-instructions.sh` を実行

## 利点

# ... existing code ...